const projectsData = {
  "projects": [
    {
      "id": "borealis",
      "title": "borealis Logo",
      "tags": [
        "Logo"
      ],
      "description": "Logo for borealis",
      "statement": [
        "My friend borealis aka Elif Bengisu Gezder didn't have any profile picture so I wanted to design a logo for her to use. Her username is coronaborealis or borealis for short and she is interested in music so I tried to combine these two. I called it scorealis.",
        "I used the music symbols and the constellation. The duration of notes approximately represents the size of the stars.",
        "She liked the design so she used it. However, now she doesn't use it bu I don't know why."
      ],
      "captions": [
        "Final design",
        "First attempt",
        "With text",
        "With score lines",
        "Inspiration"
      ]
    },
    {
      "id": "airqm",
      "title": "AirQ-M Logo",
      "tags": [
        "Logo",
        "Project"
      ],
      "description": "Logo for my project \"AirQ-M: Air Quality Meter\"",
      "statement": [
        "Logo for my project \"AirQ-M: Air Quality Meter\""
      ],
      "captions": [
        "Final design",
        "First sketch",
        "Other attempt"
      ]
    },
    {
      "id": "das_coffeetal",
      "title": "Das Coffeetal Logo",
      "tags": [
        "Logo"
      ],
      "description": "Logo for an imaginary concept coffee shop \"Das Coffeetal\".",
      "statement": [
        "One day when I was talking to my brother I had an amazing idea. Nowadays, there are so many concept coffee shops and why not open a one with a communism concept, maybe you could open it in METU.",
        "If you haven't figured it out yet, the name is a word play on \"Das Kapital\". I think it is funny.",
        "In the first sketch I wanted the logo to be a coffee cup. But my brother suggested it to be a coffee pot. I think it's better. You can see the sickle as a part of the handle with the spoon standing for the hammer.",
        "The font is \"Bourgeois\" the font of METU and it looks similar to Cyrillic alphabet."
      ],
      "captions": [
        "Final design",
        "First sketch"
      ]
    },
    {
      "id": "liselerde_bilim_uygulamalari",
      "title": "LBU Logo Redesign",
      "tags": [
        "Logo",
        "Redesign"
      ],
      "description": "Redesigning the LBU logo.",
      "statement": [
        "When I participated in LBU, I hated the logo. I think it looks disgusting. So, I tried to design my own version.",
        "I made 2 designs. I think Design1 is better however I don't know it is really usable in the event. The second design is much more usable but very very boring.",
        "But in my opinion, both designs are much much better than the current one."
      ],
      "captions": [
        "Design1",
        "Design2",
        "Current design",
        "Different font for Design1",
        "Different color scheme for Design1",
        "Different color scheme for Design1",
        "Different color schemes for Design2"
      ]
    },
    {
      "id": "fource",
      "title": "Fource Logo",
      "tags": [
        "Logo",
        "Project"
      ],
      "description": "Logo design for my project \"Fource: Fourier based Complex Encryption\"",
      "statement": [
        "I have an encryption project based on Discrete Fourier Transform and linear algebra.",
        "I wanted it to have a logo, and the logo to be elegant. So I chose a serif font.",
        "The background design is a Fourier transformed version of toothsaw function.",
        "For more info on my project check out the <a href=\"https://github.com/barkolorious/fource\" class=\"back-link\">github repo</a>."
      ],
      "captions": [
        "Final design",
        "Different color schemes"
      ]
    },
    {
      "id": "aerop",
      "title": "AEROP Logo",
      "tags": [
        "Logo",
        "Project"
      ],
      "description": "Logo for yavuzskarahan's project \"AEROP\".",
      "statement": [
        "My friend yavuzskarahan aka Yavuz Selim Karahan, has a project called AEROP which is basically an \"drone design optimization\" program. It does have a logo but I wanted to give it a try.",
        "When I made this logo I've just started to listen IDKHOW and I loved their album covers. I tried to replicate the vibe. So I stole the colors of the album \"1981 Extended Play\".",
        "My first attempts looked like MasterCard so I tried changing them and made the propeller design. It can be improved like making it better for monochrome? I don't know. I'll keep working on it."
      ],
      "captions": [
        "Final design",
        "Different color schemes",
        "Different orientations",
        "First attempt",
        "Different orientations and colors",
        "A mock-up",
        "Another mock-up",
        "Monochrome logo",
        "Loading animation"
      ]
    },
    {
      "id": "opaque",
      "title": "opaque Logo",
      "tags": [
        "Logo",
        "Project"
      ],
      "description": "Logo design for my project \"opaque: Open-source Portable Air Quality Evaluator\".",
      "statement": [
        "Logo design for my project \"opaque: Open-source Portable Air Quality Evaluator\"",
        "And I know it kind of looks like dbrand's logo."
      ],
      "captions": [
        "Final design",
        "First attempt",
        "First sketches",
        "Changed the 'a'",
        "Thinner version",
        "Rounder and bigger",
        "Squarer"
      ]
    },
    {
      "id": "barkolorious",
      "title": "barkolorious Logo",
      "tags": [
        "Logo"
      ],
      "description": "My logo which represents a blackhole",
      "statement": [
        "Logo for myself. I wanted a blackhole logo which was inspired of Kurzgesagt's blackhole. However, there are endless blackhole logos in the internet. So I wanted mein to stand out. So I tried several design but when I was poking around with Inkscape's perspective tool, I accidentaly made the last design. And it looked just right.",
        "I tried some other color schemes but blue gradient was the best. I tried to add a border, I used it liked that for some time but I changed it."
      ],
      "captions": [
        "Final design",
        "Pixelated logo",
        "Different color scheme",
        "First sketches",
        "First sketches",
        "First sketches",
        "Last design with border",
        "Inspiration"
      ]
    },
    {
      "id": "believers_never_die",
      "title": "Be(lie)vers Never Die Playlist Cover",
      "tags": [
        "Playlist Cover"
      ],
      "description": "Playlist cover for borealis",
      "statement": [
        "Playlist cover for borealis aka Elif Bengisu Gezder. The font is \"Kurs\" which is the font used in Singapore World Chess Championship 2024. When I saw this font I knew I had to use it somewhere and this was the right place to use it.",
        "In my first attempt I used a bad color scheme which I change to monochrome black and red. And the stripe in the first attemp wasn't good, it looked out of place but in the final version I think it fits right in."
      ],
      "captions": [
        "Final design",
        "Fir"
      ]
    },
    {
      "id": "japanese_pureirisuto",
      "title": "Japanese Pureirisuto Playlist Cover",
      "tags": [
        "Playlist Cover"
      ],
      "description": "Playlist cover for myself",
      "statement": [
        "As I was making this design, I had recently watched Evangelion also the lyrics video of \"Ado - unravel Cover\". Both of them have very cool vibes and I wanted to recreate it.",
        "The font is \"FOT-Matisse Pro\" which is the font of Evangelion title cards"
      ],
      "captions": [
        "Final design",
        "First sketch",
        "Second sketch",
        "Third sketch"
      ]
    },
    {
      "id": "one_more_time",
      "title": "One More Time Playlist Cover",
      "tags": [
        "Playlist Cover"
      ],
      "description": "Playlist cover for myself",
      "statement": [],
      "captions": [
        "Final design",
        "Final design's first sketch",
        "Final design's second sketch",
        "First sketch",
        "Another sketch"
      ]
    },
    {
      "id": "playloop",
      "title": "Playloop Playlist Cover",
      "tags": [
        "Playlist Cover"
      ],
      "description": "Playlist cover for myself",
      "statement": [],
      "captions": [
        "Final design",
        "First sketch of first design",
        "First design",
        "First sketch for second design",
        "Second design"
      ]
    },
    {
      "id": "4chan",
      "title": "4chan Logo Redesign",
      "tags": [
        "Logo",
        "Redesign"
      ],
      "description": "Redesigning the 4chan logo",
      "statement": [
        "Used \"Zilla Slab\" in the first skecthes."
      ],
      "captions": [
        "Final design",
        "Final design first sketches",
        "Final design first sketches",
        "First sketches",
        "Current dessign"
      ]
    },
    {
      "id": "bozsoy",
      "title": "bözsoy Logo",
      "tags": [
        "Logo"
      ],
      "description": "Logo for personal brand identity",
      "statement": [
        "I don't use this"
      ],
      "captions": [
        "Final design",
        "First sketches for final design",
        "First sketches"
      ]
    },
    {
      "id": "iflbot",
      "title": "iflbot(); Logo",
      "tags": [
        "Logo"
      ],
      "description": "Logo for IFL Informatics Olympiad Team \"iflbot\".",
      "statement": [
        "Logo for IFL Informatics Olympiad Team \"iflbot\"."
      ],
      "captions": [
        "Final design",
        "Mock-up for final design",
        "Small logo",
        "First sketch",
        "First sketch mock-up",
        "Second sketch",
        "Third sketch",
        "Fourth sketch"
      ]
    },
    {
      "id": "metu_phys",
      "title": "METU Department of Physics Logo ",
      "tags": [
        "Logo"
      ],
      "description": "My submission for the METU Physics Department logo competition.",
      "statement": [
        "My submission for the METU Physics Department logo competition.",
        "I wanted to use magnetic field lines. I tried making the METU logo with them and the letter phi (you know for physics). After I completed the design one of my brother's friend said that it kinda has an apple in it, so there is that. I couldn't win anything :(."
      ],
      "captions": [
        "Final design",
        "Constructors for the field lines",
        "First iteration",
        "Different designs",
        "More designs",
        "Final design in different backgrounds",
        "The components",
        "Final design in different sizes",
        "Mock-up for the final design"
      ]
    },
    {
      "id": "bands_in_10",
      "title": "Bands in 10",
      "tags": [
        "Playlist Cover"
      ],
      "description": "Playlist covers for my project \"Bands in 10\".",
      "statement": [
        "I'm making playlists for my favourite bands such as Lovejoy and I DONT KNOW HOW BUT THEY FOUND ME. Check them out on Spotify"
      ],
      "captions": [
        "Lovejoy",
        "I DONT KNOW HOW BUT THEY FOUND ME"
      ]
    },
    {
      "id": "denizli_idmanyurdu",
      "title": "Denizli İdmanyurdu Güreller SK",
      "tags": [
        "Logo",
        "Redesign"
      ],
      "description": "Redesigning the Denizli İdmanyurdu Güreller SK logo",
      "statement": [
        "My friend is from Denizli, Turkiye. Denizli İdmanyurdu Güreller SK recently (as of I'm writing this) changed their logo from a relatively bad logo to a BAD one. My friend gave a shot at redesigning and so did I.",
        "I have always wanted to do a line art logo and this was the one. I think it turned out wonderfully. I made multiple iterations: puffing up the chest, changing the tail... The font I used is \"Anson\".",
        "I know it's a radical design for a amateur league team."
      ],
      "captions": [
        "Final design",
        "Their redesign",
        "With wordmark",
        "A mock-up with a tileable background",
        "Previous terations",
        "Another mock-up"
      ]
    },
    {
      "id": "ifl26_hoodie",
      "title": "IFL'26 Hoodie Design",
      "tags": [
        "Design"
      ],
      "description": "Hoodie design for Izmir Science High Seniors '26.",
      "statement": [
        "My friend and I made a design for the seniors' hoodie. The design was his idea, I present my own take on it... but we ended up using his design which is, in my opinion, unbalanced, badly kerned and too thin to be seen from a distance."
      ],
      "captions": [
        "My design",
        "Previous iterations"
      ]
    },
    {
      "id": "mom_birthday_24",
      "title": "Present for Mom",
      "tags": [
        "Design"
      ],
      "description": "My present for my mom's 54th birthday.",
      "statement": [
        "This is a constructed language called Tsevhu. The translations are (from left to right) \"I wish you a happy birthday.\" and \"I love you.\".",
        "My translation work:",
        "S O V",
        "I love you",
        "I (male)",
        "nsae /nse/ active",
        "love",
        "lonayo v1 /lonajo/ active (verb)",
        "you (female)",
        "nin /nin/ stative",
        "---------------------------------------------------------",
        "I.a wish.a you.os (a happy birthday).s",
        "I (male) active",
        "nsae /nse/ active",
        "wish",
        "iido /ɪdo/ v1",
        "you (female) oblique stative",
        "nin /nin/ stative",
        "happy",
        "auri /aʊɾi/ (adjective)",
        "birthday",
        "liinesa /lɪsnɛsɑ/ (noun)",
        "More on Tsevhu: https://docs.google.com/spreadsheets/d/1Z3GgLvUsjAupx9l_Zo0lBfozFwRk_K_gE6kCBJmuU3Y/edit?usp=sharing"
      ],
      "captions": [
        "The present"
      ]
    },
    {
      "id": "qubit_magazine",
      "title": "Cover Page for Qubit Magazine",
      "tags": [
        "Design"
      ],
      "description": "The cover page for imaginary magazine called \"Qubit\"",
      "statement": [
        "The cover page for imaginary tech magazine called \"Qubit\". Font is \"Humane\"."
      ],
      "captions": [
        "Last iteration",
        "Qubit logo",
        "My workboard",
        "First iteration",
        "2nd iteration",
        "3rd iteration",
        "4th iteration",
        "5th iteration",
        "Another color scheme"
      ]
    },
    {
      "id": "itk_student_card",
      "title": "Student Card Design for ITK",
      "tags": [
        "Redesign"
      ],
      "description": "A student card to be used in Izmir Turkish Collage",
      "statement": [
        "A student card to be used in Izmir Turkish Collage. The \"ÖĞRENCİ\" font is \"Conthrax\"."
      ],
      "captions": [
        "Front",
        "Back"
      ]
    },
    {
      "id": "huseyin_yildiz",
      "title": "Personal Logo for Hüseyin Yıldız",
      "tags": [
        "Logo"
      ],
      "description": "Logo for Hüseyin Yıldız",
      "statement": [
        "Personal logo for my brother's friend Hüseyin Yıldız. \"Yıldız\" means \"star\" in Turkish."
      ],
      "captions": [
        "Final logo",
        "With his name",
        "Previous iteration",
        "More  iterations"
      ]
    },
    {
      "id": "nilsu_gencel",
      "title": "Logo for Nilsu Gencel",
      "tags": [
        "Logo"
      ],
      "description": "Logo for Nilsu Gencel",
      "statement": [
        "Logo for Nilsu Gencel"
      ],
      "captions": [
        "The design",
        "With her name"
      ]
    },
    {
      "id": "betig",
      "title": "betig Logo",
      "tags": [
        "Logo"
      ],
      "description": "Logo design for my project \"betig\"",
      "statement": [],
      "captions": [
        "The logo",
        "Color scheme to be used in the project"
      ]
    },
    {
      "id": "gospace",
      "title": "Logo for gospace",
      "tags": [
        "Logo",
        "Redesign"
      ],
      "description": "Logo design for my brother's project \"gospace\"",
      "statement": [],
      "captions": [
        "Final logo",
        "Without wordmark",
        "Wordmark",
        "Previous iteration"
      ]
    },
    {
      "id": "ifle3",
      "title": "Logo for Izmir Science High Electric and Electronics Engineers",
      "tags": [
        "Logo"
      ],
      "description": "Logo design for Izmir Science High Electric and Electronics Engineers",
      "statement": [],
      "captions": [
        "Last design",
        "A mock-up",
        "1st iteration",
        "2nd iteration",
        "3rd iteration",
        "More iterations",
        "MORE iterations",
        "Variations of 2nd iteration"
      ]
    },
    {
      "id": "iflpt",
      "title": "Logo for Izmir Science High Project Team",
      "tags": [
        "Logo"
      ],
      "description": "Logo design for Izmir Science High Project Team",
      "statement": [],
      "captions": [
        "Final design",
        "1st iteration",
        "Color schemes",
        "A mock-up",
        "Another mock-up"
      ]
    },
    {
      "id": "parrot",
      "title": "Logo for parrot",
      "tags": [
        "Logo"
      ],
      "description": "Logo for my start-up \"parrot\"",
      "statement": [],
      "captions": [
        "Final design",
        "Monochrome design",
        "Wordmark",
        "Mock-up",
        "Package pattern"
      ]
    },
    {
      "id": "tomorrow",
      "title": "Logo for tomorrow",
      "tags": [
        "Logo",
        "Redesign",
        "Playlist Cover"
      ],
      "description": "Logo for the band tomorrow",
      "statement": [],
      "captions": [
        "Final redesign",
        "\"Perfect Blue\" Cover",
        "\"Foxholes\" Cover",
        "\"Wasted Summer\" Cover"
      ]
    }
  ]
};

function loadContent() {
  try {
    const hash = window.location.hash;
    const mainContent = document.querySelector('main');

    if (hash.startsWith('#project/')) {
      const projectId = hash.replace('#project/', '');
      const project = projectsData.projects.find(p => p.id === projectId);

      console.log(project);
      
      if (project) {
        mainContent.innerHTML = generateProjectPage(project);
      } else {
        mainContent.innerHTML = '<p class="error">Project not found</p>';
      }
    } else if (hash.startsWith("#tag/")) {
      const tagId = decodeURI(hash.replace('#tag/', ''));
      console.log(tagId);

      mainContent.className = 'portfolio-grid';
      mainContent.innerHTML = '';
      document.title = `My Design Portfolio - ${tagId}s`;

      projectsData.projects.forEach(project => {
        if (project.tags.includes(tagId)) {
        const portfolioItem = createPortfolioItem(project);
        mainContent.appendChild(portfolioItem);
        }
      });
      
    } else {
      projectsData.projects.sort((a, b) => {
        const title_a = a.title.toUpperCase();
        const title_b = b.title.toUpperCase();
        if (title_a < title_b) return -1;
        else if (title_b < title_a) return 1;
        return 0;
      })

      mainContent.className = 'portfolio-grid';
      mainContent.innerHTML = '';
      document.title = `My Design Portfolio`;
      
      projectsData.projects.forEach(project => {
        const portfolioItem = createPortfolioItem(project);
        mainContent.appendChild(portfolioItem);
      });
    }
  } catch (error) {
    console.error('Error loading content:', error);
    const mainContent = document.querySelector('main');
    mainContent.innerHTML = '<p class="error">Failed to load content. Please try again later.</p>';
  }
}

function createPortfolioItem(project) {
  const portfolioItem = document.createElement('a');
  portfolioItem.href = '#project/' + project.id; // Changed to use hash routing
  portfolioItem.className = 'portfolio-item';

  portfolioItem.innerHTML = `
    <div class="image-container">
      <img src="assets/${project.id}/img00.png" alt="${project.title}">
    </div>
    <div class="item-content">
      <h1>${project.title}</h1>
      <div class="tags">
        ${project.tags.map(tag => `<a href="#tag/${tag}"><span class="tag">${tag}</span></a>`).join('')}
      </div>
      <p>${project.description}</p>
    </div>
  `;

  return portfolioItem;
}

function generateProjectPage(project) {
  document.title = `${project.title} - Portfolio`;
  
  const content = `
    <div class="project-container">
      <div>
        <a href="#" class="back-link">← Back to Portfolio</a>
        <div class="image-grid">
          ${project.captions.map((caption, index) => `
            <div class="image-wrapper">
              <img 
                src="assets/${project.id}/img${String(index).padStart(2, '0')}.png" 
                alt="${caption}"
                onclick="openModal(this.src, this.nextElementSibling.textContent)"
              >
              <p class="image-caption">Figure ${index + 1}: ${caption}</p>
            </div>
          `).join('')}
        </div>
      </div>

      <div class="project-info">
        <h1>${project.title}</h1>
        <div class="tags">
          ${project.tags.map(tag => `<a href="#tag/${tag}"><span class="tag">${tag}</span></a>`).join('')}
        </div>
        ${project.statement.map(paragraph => `<p>${paragraph}</p>`).join('')}
      </div>
    </div>

    <div class="modal" id="imageModal">
      <button class="close-modal" onclick="closeModal()">×</button>
      <div id="modalContent"></div>
      <p id="modalCaption" class="image-caption"></p>
    </div>
  `;
  
  return content;
}

document.addEventListener('DOMContentLoaded', loadContent);
window.addEventListener('hashchange', loadContent);

document.addEventListener('error', function(e) {
  if (e.target.tagName.toLowerCase() === 'img') {
    e.target.src = 'assets/placeholder.png';
  }
}, true);

// -----------------------------------------------

function openModal(content, caption = '') {
  const modal = document.getElementById('imageModal');
  const modalContent = document.getElementById('modalContent');
  const modalCaption = document.getElementById('modalCaption');
  modal.style.display = 'block';
  
  modalContent.innerHTML = `<img src="${content}" alt="Full size image">`;
  modalCaption.textContent = caption;
}

function closeModal() {
  document.getElementById('imageModal').style.display = 'none';
}

document.getElementById('imageModal')?.addEventListener('click', function(e) {
  if (e.target === this) {
    closeModal();
  }
});

document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    closeModal();
  }
});

const lastEditDate = '2025-1-5';
document.getElementById('lastUpdated').textContent = new Date(lastEditDate).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });